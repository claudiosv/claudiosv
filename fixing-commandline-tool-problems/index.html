<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,minimum-scale=1"><title>Fixing commandline tool problems - Claudio Spiess</title><meta property="og:title" content="Fixing commandline tool problems - Claudio Spiess"><meta property="og:type" content="article"><meta property="og:image" content="img/profile.jpg"><meta property="og:url" content="https://claudiosv.github.io/blog/fixing-commandline-tool-problems/"><meta property="og:description" content="TEST"><meta name=Description property="description" content="TEST"><link rel=stylesheet href=https://claudiosv.github.io/blog/css/style.min.css><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/svg+xml href=/favicon.svg><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link href=https://claudiosv.github.io/blog/index.xml type=application/atom+xml rel=alternate title="Sitewide Atom feed"><meta name=theme-color content="#ffffff"><script>function updateMode(){localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}function toggleMode(){localStorage.theme==="dark"?localStorage.theme="light":localStorage.theme="dark",updateMode()}window.onload=updateMode();function toggleMenu(){let e=document.getElementById("navbar-default");e.classList.contains("hidden")?e.classList.remove("hidden"):e.classList.add("hidden")}</script></head><body><header class="md:px-0 px-2"><nav><div class="container flex flex-wrap justify-between items-center mx-auto"><div class="nav-main my-2.5"></div><button type=button onclick=toggleMenu() class="inline-flex items-center p-2 ml-3
text-sm text-gray-500
rounded-lg md:hidden hover:bg-gray-100
focus:outline-none focus:ring-2
focus:ring-gray-200 dark:text-gray-400
dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls=navbar-default aria-expanded=false>
<span class=sr-only>Open main menu</span><svg class="w-6 h-6" aria-hidden="true" fill="currentcolor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4A1 1 0 013 5zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/></svg></button><div class="hidden w-full md:block md:w-auto" id=navbar-default><ul class="grid md:grid-flow-col items-center justify-between text-lg my-2.5"><li class="p-2.5 md:first:pl-0 md:border-none border-b dark:border-zinc-500 list-none"><a class="text-zinc-600 dark:text-zinc-300
hover:border-b-0" href=/blog/>Home</a></li><li class="p-2.5 md:first:pl-0 md:border-none border-b dark:border-zinc-500 list-none"><a class="text-zinc-600 dark:text-zinc-300
hover:border-b-0" href=/blog/post/>Posts</a></li><li class="h-7 pl-2.5 pr-0 list-none"><button type=button onclick=toggleMode() class=h-full aria-label="Toggle between dark and light mode">
<img class="h-7 w-7 max-h-full mb-1.5 p-1.5 hidden dark:inline" id=ligh-mode-button-img alt="A sun icon for switching to light mode" src=https://claudiosv.github.io/blog/img/light_mode.svg>
<img class="h-7 w-7 max-h-full mb-1.5 p-1.5 inline dark:hidden" id=dark-mode-button-img alt="A moon icon for switching to dark mode" src=https://claudiosv.github.io/blog/img/dark_mode.svg></button></li></ul></div></div></nav></header><main class="content h-card container mt-2 m-auto
leading-loose md:px-0 px-2 z-0" role=main><article class="article h-entry" itemprop=mainEntity itemscope itemtype=http://schema.org/BlogPosting><div class=title-container><h1 class="article-title p-name" itemprop=name>Fixing commandline tool problems</h1><div class="flex justify-between items-center"><a class="text-lg text-gray-600 dark:text-gray-400 border-none u-url" href=https://claudiosv.github.io/blog/fixing-commandline-tool-problems/><time itemprop=datePublished class=dt-published datetime=2020-02-27T21:32:00+0100 content="2020-02-27T21:32:00+0100">2020.02.27</time></a>
<a class="text-gray-600 dark:text-gray-400 text-right border-none p-author h-card" rel=author href=https://claudiosv.github.io/blog/ itemprop=author itemscope itemtype=http://schema.org/Person><span itemprop=name>Claudio V. Spieß</span></a></div></div><div class="article-content e-content" itemprop=articleBody><h2 id=the-solution-to-node-gyp--ruby-ffi-problems>The solution to node-gyp & Ruby FFI problems</h2><p>After almost every update of MacOS, my Nodejs and Ruby set up seem to break. This has to do with the xcode command line utilities, as these are required when compiling a native extension like <code>fsevents</code> using Apple&rsquo;s clang compiler.</p><p>The errors look something like this:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>xcode-select: error: tool <span style=color:#ed9d13>&#39;xcodebuild&#39;</span> requires Xcode, butactive developer directory <span style=color:#ed9d13>&#39;/Library/Developer/CommandLineTools&#39;</span>is a <span style=color:#24909d>command</span> line tools instance
</span></span><span style=display:flex><span>xcode-select: error: tool <span style=color:#ed9d13>&#39;xcodebuild&#39;</span> requires Xcode, butactive developer directory <span style=color:#ed9d13>&#39;/Library/Developer/CommandLineTools&#39;</span>is a <span style=color:#24909d>command</span> line tools instance
</span></span><span style=display:flex><span>No receipt <span style=color:#6ab825;font-weight:700>for</span> <span style=color:#ed9d13>&#39;com.apple.pkg.CLTools_Executables&#39;</span> found at <span style=color:#ed9d13>&#39;/&#39;</span>.
</span></span><span style=display:flex><span>No receipt <span style=color:#6ab825;font-weight:700>for</span> <span style=color:#ed9d13>&#39;com.apple.pkg.DeveloperToolsCLILeo&#39;</span> found at <span style=color:#ed9d13>&#39;/&#39;</span>.
</span></span><span style=display:flex><span>No receipt <span style=color:#6ab825;font-weight:700>for</span> <span style=color:#ed9d13>&#39;com.apple.pkg.DeveloperToolsCLI&#39;</span> found at <span style=color:#ed9d13>&#39;/&#39;</span>.
</span></span><span style=display:flex><span>gyp: No Xcode or CLT version detected!
</span></span><span style=display:flex><span>gyp ERR! configure error
</span></span><span style=display:flex><span>gyp ERR! stack Error: <span style=color:#ed9d13>`</span>gyp<span style=color:#ed9d13>`</span> failed with <span style=color:#24909d>exit</span> code: <span style=color:#3677a9>1</span>
</span></span></code></pre></div><h1 id=approach-1>Approach 1:</h1><h3 id=have-you-tried-turning-it-on-and-off>Have you tried turning it on and off?</h3><h5 id=are-they-actually-installed>(are they actually installed?)</h5><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>xcode-select --install
</span></span></code></pre></div><p>This installs the command line tools.</p><p>Most of the time you will get <code>xcode-select: error: command line tools are already installed, use "Software Update" to install updates</code> so you probably want to move on to the next approach.</p><h1 id=approach-2>Approach 2:</h1><h3 id=clean-reset>Clean reset</h3><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo xcode-select --reset
</span></span></code></pre></div><p>After running that in your terminal, restart it. If that doesn&rsquo;t do it, you&rsquo;ll need a more aggressive approach.</p><h1 id=approach-3>Approach 3:</h1><h3 id=nuke-it>Nuke it</h3><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo rm -rf <span style=color:#6ab825;font-weight:700>$(</span>xcode-select -print-path<span style=color:#6ab825;font-weight:700>)</span>
</span></span><span style=display:flex><span>xcode-select --install
</span></span></code></pre></div><p>You must then click your way through the licenses and prompts, and in about 10 minutes, the command line tools will have been reinstalled.</p><p>Note: It is not smart to copy and paste anything with <code>rm -rf</code> in it, you should print the path first and delete it yourself.</p></div><div class="text-neutral-500 mb-4">Last modified <span itemprop=dateModified datetime=2020-02-27T21:32:00+0100 content="2020-02-27T21:32:00+0100">2020.02.27</span></div></article></main><footer class="footer container h-10 text-center mt-1"><hr class=my-4><ul class="pl-0 mt-1"><li class="ml-2 first:before:content-none before:content-['•']
inline-block list-none">Made with ❤️ in Davis</li><li class="ml-2 first:before:content-none before:content-['•']
text-neutral-800 dark:text-neutral-400 inline-block list-none"><span class=ml-2>© Claudio Spiess 2023</span></li></ul></footer></body></html>